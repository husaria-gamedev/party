<html>

    <body>

        <div id="roomId"></div>

        <script type="module">
            const localConnection = new RTCPeerConnection({
                iceServers: [
                    { urls: "stun:stun.l.google.com:19302" },
                ]
            });

            console.log('creating data channel');
            localConnection.createDataChannel('');

            let offer;
            console.log(localConnection)
            localConnection.addEventListener("icecandidate",async (ev) => {
                if(ev.candidate == null) {
                    console.log("done")
                }
                console.log("candidate", ev.candidate, offer)
                
            })

            offer = await localConnection.createOffer({
                iceRestart: true
            })
            console.log(offer)
            await localConnection.setLocalDescription(offer)
            console.log("set local description", localConnection.iceGatheringState)
        </script>
    </body>
</html>